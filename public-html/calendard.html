<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8">
    <link rel='stylesheet' href='fullcalendar/fullcalendar.css' />
    <link rel='stylesheet' href='bootstrap-3.3.7-dist/css/bootstrap-theme.min.css' />
    <link rel='stylesheet' href='bootstrap-3.3.7-dist/css/bootstrap.min.css' />
    <script src='fullcalendar/lib/jquery.min.js'></script>
    <script src='fullcalendar/lib/moment.min.js'></script>
    <script src='fullcalendar/fullcalendar.js'></script>
    <script src='fullcalendar/locale/fr.js'></script>
    <script type='text/javascript' src='fullcalendar/gcal.js'></script>
    <script lang="text/javascript">
      function $_GET(param) {
        var vars = {};
        window.location.href.replace( location.hash, '' ).replace(
          /[?&]+([^=&]+)=?([^&]*)?/gi, // regexp
          function( m, key, value ) { // callback
            vars[key] = value !== undefined ? value : '';
          }
        );

        if ( param ) {
          return vars[param] ? vars[param] : null;
        }
        return vars;
      };

      $(document).ready(function(){
        var get = $_GET(),
          centre = get['centre'];

        $('#calendar').fullCalendar({
          theme: 'bootstrap3',
          views: {
            month: { // name of view
              titleFormat: 'MMMM YYYY'
            }
          },
          header: {
            left: 'today',
            center: 'title',
            // right: 'month,agendaWeek,agendaDay'
            right: 'prev,next'
          },
          weekends: false,
          weekNumbers: false,
          eventLimit: true, // allow "more" link when too many events
          eventSources: [
            {
              url: '/'+centre+'.json',
              color: 'grey',
              textColor: 'white'
            }
          ]
        });
          // integration Google
          // googleCalendarApiKey: 'AIzaSyByBQ3RRr02-5-u65ab48OeBo5bb4g__B4',
          // events: {
          //   googleCalendarId: 'philippe.bron@gmail.com'
          // }
          // events: [
          //   {
          //     "title": "Ecrit francais",
          //     "start": "2018-06-18"
          //   },
          //   {
          //     "title": "Oral francais",
          //     "start": "2018-06-28"
          //   }
          // ]

          // sources des examens
          // eventSources: [
          //   // centre Rosny
          //   {
          //     url: '/rosny.php',
          //     type: 'POST',
          //     data: {
          //       custom_param1: 'something',
          //       custom_param2: 'somethingelse'
          //     },
          //     error: function() {
          //       alert('there was an error while fetching events!');
          //     },
          //     color: 'yellow',   // a non-ajax option
          //     textColor: 'black' // a non-ajax option
            // },
            //
            // // centre Villepinte
            // {
            //   url: '/villepinte.php',
            //   type: 'POST',
            //   data: {
            //     custom_param1: 'something',
            //     custom_param2: 'somethingelse'
            //   },
            //   error: function() {
            //     alert('there was an error while fetching events!');
            //   },
            //   color: 'red',   // a non-ajax option
            //   textColor: 'white' // a non-ajax option
            // }

            // any other sources...
          // ]

        // });

        var calendar = $('#calendar').fullCalendar('getCalendar');


        calendar.on('dayClick', function(date, jsEvent, view) {
          console.log('clicked on ' + date.format('DD/MM/YYYY'));
          alert("Voulez-vous vraiment reserver le "+date.format('DD MMMM YYYY')+" ?");
        });
      });
    </script>
  </head>
  <body>
    <div id='calendar'></div>
  </body>
</html>
